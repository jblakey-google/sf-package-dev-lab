<template>
    <lightning-card title="Agent Assist Setup Assistant" icon-name="standard:custom">
        <div class="slds-p-around_medium">
            <template lwc:if={isSuccess}>
                <div class="slds-notify slds-notify_alert slds-theme_success" role="alert">
                    <span class="slds-assistive-text">success</span>
                    <h2>Setup Complete! You are now ready to receive messages.</h2>
                </div>
            </template>

            <template lwc:if={error}>
                <div class="slds-notify slds-notify_alert slds-theme_error" role="alert">
                    <span class="slds-assistive-text">error</span>
                    <h2>{error}</h2>
                </div>
                <p class="slds-p-top_small slds-text-color_error">
                    Note: Ensure a Remote Site Setting is added for your org's domain.
                </p>
            </template>

            <p class="slds-m-bottom_small">
                Click the button below to automatically configure the routing engine and permissions:
            </p>

            <ul class="slds-list_dotted slds-m-bottom_medium slds-m-left_medium">
                <li><strong>Enable Features:</strong> Activates Messaging and Service Cloud Voice settings.</li>
                <li><strong>Service Channels:</strong> Configures channels for Messaging and Voice.</li>
                <li><strong>Routing Engine:</strong> Creates the "Agent Assist" Queue and Routing Configuration.</li>
                <li><strong>Presence Statuses:</strong> Creates "Busy" and "Online (Messaging)" statuses.</li>
                <li><strong>Permissions:</strong> Generates the "Agent Assist Messaging" Permission Set.</li>
                <li><strong>User Access:</strong> Automatically assigns the permission set to <strong>you</strong>.</li>
            </ul>

            <lightning-button 
                variant="brand" 
                label="Deploy Metadata Resources" 
                onclick={handleDeploy}
                disabled={isLoading}>
            </lightning-button>

            <template lwc:if={isLoading}>
                <lightning-spinner alternative-text="Loading" size="small"></lightning-spinner>
            </template>
        </div>
    </lightning-card>
</template>